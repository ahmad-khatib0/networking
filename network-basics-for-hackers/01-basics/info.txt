
The IP address system we are presently using is known as IP version 4, or IPv4. It is made up of
  32 bits of four octets (8 characters) or four groups of 8 bits (on/off switches).

Take, for instance, 192.168.1.101. Each of the numbers between the dots (.) is the decimal equivalent of 8 bits. 
  This means that we calculate the base 2 number (that computers use) represented by the 8 bits and convert 
  them to decimal numbers that humans are more accustomed to working with Each one of the octets (8 bits) is 
  capable of representing numbers within the range 0 through 255 (2 to the 8th power).

Classes of IP Addresses
IP addresses are generally put into three classes, A, B, and C. The ranges of the classes are as follows:
 - - -    Class A: 0.0.0.0   - 127.255.255.255
 - - -    Class B: 128.0.0.0 - 191.255.255.255
 - - -    Class C: 192.0.0.0 - 223.255.255.255
  
Public vs. Private IP Addresses
  These private addresses include:
- - -    192.168.0.0   - 192.168.255.255
- - -    10.0.0.0      - 10.255.255.255
- - -    172.16.0.0    - 172.16.255.255

DHCP
  Dynamic Host Configuration Protocol (DHCP) assigns IP addresses dynamically. This means that you do not have 
  the same IP address all of the time. Most of the time, these IP address assignments are on a local area 
  network. Remember, on LANs; we use private IP addresses. When each device is connected to the LAN, it must 
  request an IP address. That device sends the request to the DHCP server that assigns an IP address to that 
  system for a fixed length of time, known as a "lease."

NAT
  Network Address Translation (NAT) is a protocol whereby internal private IP addresses are "translated" to 
  an external public IP address that can be routed through the internet to its destination

Port 
  There are 65,536 (2 raised to the 16th power) ports. The first 1,024 are generally referred to as the "common ports


Look at an IP packet header: 
Row 1: 
- Version: This defines the version of IP, either v4 or v6.
- IHL: Defines the header length.
- Type of Service (TOS): This defines the type of service of this packet. These include
     minimize delay, maximize throughput, maximize reliability, and minimize monetary cost.
- Total Length: This defines the total length of the IP datagram (including the data) or the
  fragment. Its maximum value is 65,535.

Row 2:
- Identification: This field uniquely identifies each packet. It can be critical in reassembling fragmented packets.
- IP Flags: This field defines whether the packet is fragmented (M) or not (D). The manipulation of the 
  field can be used to evade IDS and firewalls. Check out my tutorials on nmap and hping3 on how we can 
  manipulate packets to evade intrusion detection systems and other security devices. It can also be used in 
  conjunction with the Window field to identify the operating system of the sender.
- Fragment Offset: This field is used when packets are fragmented. It defines where the
  packets should be reassembled from the beginning of the IP header.

Row 3: 
- TTL: This is the "time to live." This defines how many hops across the internet before the packet 
  expires. It varies by the operating system making it helpful to identify the OS of the sender.
- Protocol: This field defines what protocol is being used with IP. Most often, it will be 6
  or TCP, 1 for ICMP, 17 for UDP, among others.
- Header Checksum: This is an error-checking field. It calculates the checksum (a simple algorithm) to 
  determine the integrity of the data in the header.

Rows 4 & 5:
- Source / Destination: These rows of the IP header are probably the most important part
  of the header as it contains the source and destination IP address.

Row 6: 
- Options: This field is variable in length, and its use is optional (as you might expect).
- Padding: This field is used to fill out, if necessary, the remaining bits and bytes of the header.


TCP (Transmission Control Protocol) Header: 
Row 1:
- Source Port / Destination Port: Probably most importantly, these are the source port and destination port. 
  These fields determine what port the communication came from (source) and where it is going (destination).

Row 2: 
- Sequence Number: The sequence number is generated by the source machine's TCP stack and is used to make certain 
  that packets are arranged in the proper sequence when they arrive. It is also important in defeating MitM attacks.

Row 3:
- Acknowledgment Number: This is an echo of the Sequence Number sent back by the receiving system. It basically 
  says, "I received the packet with the Sequence #." In this way, the sender knows that the packet has arrived. 
  If the sender does not receive an Acknowledgment Number back in a fixed amount of time, it will resend the 
  packet to make certain the receiver gets the packet. In this way, TCP is reliable (in contrast, UDP
  does not do this and is, therefore, unreliable).

Row 4: 
- The fourth row has some critical information. Let's skip over the Data Offset and the Reserved fields. That 
  takes us to 8 bits near the middle of Row 4. These are the infamous flags of the three-way handshake and 
  nmap scans.
--- The first two bits, CWR and ECE, are beyond the scope of this lesson. The next six bits are the
    URG, ACK, PSH, RST, SYN, and FIN flags. These flags are used by TCP to communicate:
1  -  SYN: The opening of a new connection.
2  -  FIN: The normal, "soft" closing of a connection.
3  -  ACK: The acknowledgment of a packet. All packets after the three-way handshake should have this bit set.
4  -  RST: The hard-close of a connection and is usually used to communicate that the packet  has 
      arrived at the wrong port or IP.
5  -  URG: This flag indicates that the following data is urgent.
6  -  PSH: Push the data past the buffer to the application.
 
- Window Size: In some diagrams, this is simply described as the Window field. Its role is to communicate 
  the size of the window that the TCP stack has to buffer packets. This is the way that TCP manages flow 
  control. From a recon or forensics perspective, this field alone can be enough to identify the OS that 
  sent the packet. This field varies from OS to OS and even from SP to SP. Given this bit of information, 
  one can predict with about 80% accuracy the OS that sent the packet. In fact, it is this field and a few others 
  (DF and TTL in the IP header) that operating system fingerprinters such as p0f use to identify the OS.

Row 5:
- Checksum: This field uses a simple algorithm to check for errors. In essence, it is an integrity checker.
- URG Pointer: This field points to the last byte of the sequence number of urgent data.
  The URG flag must be set in conjunction to activate this field.

Row 6:
- Options: Like the IP header, the TCP header has an options field to be used if necessary, 
  and it is varying length.
- Padding: The padding is necessary to bring the TCP header to a multiple of 32 bits.


TCP Three-Way Handshake:
  Every TCP connection starts with a 3-way handshake. The handshake begins with a client sending a packet 
  with the SYN flag set saying, “Hello, I want to talk to you” the server responds with a packet with the SYN 
  and ACK flags set saying, “Hi, I’m willing and able to chat,” andhh then finally, the client sends a packet 
  with the ACK flag set that acknowledges the response of the server, and then the data transfer can begin.

UDP
  User Datagram Protocol or UDP is a connectionless protocol (vs. TCP, which is connection-oriented and requires 
  a connection such as the 3-way handshake as seen above). It is more lightweight than TCP since it doesn’t 
  have the overhead of assuring a connection and making certain that each packet arrives. UDP simply sends 
  packets and forgets about them.

When scanning for UDP ports with tools such as nmap, it can take a bit longer as UDP does not
  have a response for lost packets or closed ports. Nmap simply waits a specified time, and if no
  response is returned, it assumes the port is closed

Network Topologies
  When devices are connected together, there are several options for the physical layout of the devices. 
  This physical layout can be very important in optimizing the distance, latency, congestion, and availability 
  of any two nodes on the network. This physical configuration is known as topology.

- Ring Topology: 
  The original topology in the early systems was a bus topology. Each of the devices is strung together in a 
  single line. Each device can tap into the bus to send and receive packets. Every node can see every packet 
  sent over the bus. Each device has to examine each packet to determine if the packet is intended for them. 
  The advantage to the bus topology is that it is cheap and simple, while the disadvantage is that on a 
  busy network, it can easily become congested.
- Star Topology
  The star topology is the most popular topology for local area networks (LAN). In the star
  topology, there is a server at the center of the star, and the clients all connect to the server. The
  advantage of this topology is that the connections to each of the clients are independent, and if
  one client or its connection is broken, the others clients can still communicate with the server.


Many people remember The OSI Model layers by using the mnemonic device:
  There are seven layers to the OSI model, the Application layer, the Presentation layer, the session layer, 
  the Transport layer, the Network layer, the Data link layer, and finally, the Physical layer.
  
  """"" All People Seem To Need Data Processing. """""
  
The OSI Model from a Cybersecurity Perspective: 

- The Application layer generally includes applications such as a browser, word processors, and other 
  applications. This layer’s most important attacks are likely to be exploits. These are attacks that can 
  often embed the hacker’s code within the application to take control of the application and the system.
  
- At the Presentation layer, the most concerning attack is phishing or sending emails to various
  people with malicious links.
     
- At the Session layer, the most important attack is hijacking. Hijacking is where an attacker can
  take over an existing session established legitimately by the user.

- At the Transport layer, the hacker often does their reconnaissance at this layer.

- At the Network layer, the attackers can conduct Man-in-the-Middle MiTM) attacks where they place themselves 
  between a legitimate user and a server, thereby eavesdropping on the traffic and possibly even altering it.

- At the Data Link Layer, the attacker can spoof the MAC addresses, the globally unique address
  stamped on every networked device and essential to the proper functioning of a LAN (see ARP)

- Finally, the Physical layer can be attacked using sniffing. Sniffing is the practice of watching
  and analyzing network traffic 



